{"ast":null,"code":"import _regeneratorRuntime from \"/Users/lidiannan/Documents/GitHub/calendar2/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/lidiannan/Documents/GitHub/calendar2/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.parse-int.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport { ref, computed, watch, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport { useToast } from 'primevue/usetoast';\nimport { useConfirm } from 'primevue/useconfirm';\nimport moment from 'moment';\nexport default {\n  name: 'CalendarComponent',\n  setup: function setup() {\n    var store = useStore();\n    var toast = useToast();\n    var confirm = useConfirm();\n\n    // 日期相關\n    var today = moment();\n    var currentDate = ref(today);\n    var selectedMonth = ref(today.month() + 1);\n    var selectedYear = ref(today.year());\n\n    // 對話框狀態\n    var newEventDialog = ref(false);\n    var eventDetailsDialog = ref(false);\n    var editEventDialog = ref(false);\n\n    // 事件相關\n    var newEvent = ref({\n      title: '',\n      description: '',\n      startTime: null,\n      endTime: null,\n      location: '',\n      securityLevel: null,\n      specialViewerIds: []\n    });\n    var selectedEvent = ref(null);\n    var editingEvent = ref(null);\n    var savingEvent = ref(false);\n\n    // 計算屬性\n    var currentUser = computed(function () {\n      return store.getters['auth/currentUser'];\n    });\n    var events = computed(function () {\n      return store.getters['calendar/events'];\n    });\n    var securityLevels = computed(function () {\n      return store.getters['employee/securityLevels'];\n    });\n    var employees = computed(function () {\n      return store.getters['employee/employees'];\n    });\n\n    // 日曆上顯示的日期\n    var calendarDays = computed(function () {\n      var days = [];\n      var calendarDate = moment([selectedYear.value, selectedMonth.value - 1, 1]);\n      var monthStart = calendarDate.clone().startOf('month');\n      var monthEnd = calendarDate.clone().endOf('month');\n      var calendarStart = monthStart.clone().startOf('week');\n      var calendarEnd = monthEnd.clone().endOf('week');\n\n      // 檢查是否需要顯示六週（有些月份在日曆上可能需要六行）\n      var daysInCalendar = calendarEnd.diff(calendarStart, 'days') + 1;\n      if (daysInCalendar < 42) {\n        calendarEnd.add(7, 'days');\n      }\n\n      // 生成日曆的所有日期\n      var day = calendarStart.clone();\n      while (day.isSameOrBefore(calendarEnd)) {\n        var isOtherMonth = day.month() !== monthStart.month();\n        var dayEvents = events.value.filter(function (event) {\n          var start = moment(event.startTime);\n          var end = moment(event.endTime);\n          return day.isBetween(start, end, 'day', '[]');\n        });\n        days.push({\n          date: day.format('YYYY-MM-DD'),\n          dayNumber: day.date(),\n          isOtherMonth: isOtherMonth,\n          isToday: day.isSame(today, 'day'),\n          events: dayEvents\n        });\n        day = day.add(1, 'day');\n      }\n      return days;\n    });\n    var weekdays = ref(['日', '一', '二', '三', '四', '五', '六']);\n    var months = ref([{\n      name: '一月',\n      value: 1\n    }, {\n      name: '二月',\n      value: 2\n    }, {\n      name: '三月',\n      value: 3\n    }, {\n      name: '四月',\n      value: 4\n    }, {\n      name: '五月',\n      value: 5\n    }, {\n      name: '六月',\n      value: 6\n    }, {\n      name: '七月',\n      value: 7\n    }, {\n      name: '八月',\n      value: 8\n    }, {\n      name: '九月',\n      value: 9\n    }, {\n      name: '十月',\n      value: 10\n    }, {\n      name: '十一月',\n      value: 11\n    }, {\n      name: '十二月',\n      value: 12\n    }]);\n    var years = computed(function () {\n      var currentYear = today.year();\n      var yearOptions = [];\n      for (var i = currentYear - 5; i <= currentYear + 5; i++) {\n        yearOptions.push(i);\n      }\n      return yearOptions;\n    });\n    var currentMonthYear = computed(function () {\n      return \"\".concat(selectedYear.value, \"\\u5E74 \").concat(months.value.find(function (m) {\n        return m.value === selectedMonth.value;\n      }).name);\n    });\n\n    // 安全等級選項\n    var securityLevelOptions = computed(function () {\n      if (!securityLevels.value) return [];\n\n      // 獲取所有安全等級\n      var allLevels = Object.keys(securityLevels.value).map(function (level) {\n        return {\n          name: securityLevels.value[level].description,\n          value: level\n        };\n      });\n\n      // 如果沒有當前用戶或沒有安全等級，返回所有選項\n      if (!currentUser.value || !currentUser.value.securityLevel) return allLevels;\n\n      // 根據當前用戶安全等級過濾選項\n      // 安全等級數字越小權限越高\n      // LEVEL_1: 最高權限, LEVEL_2: 高級權限, LEVEL_3: 中級權限, LEVEL_4: 基本權限\n      return allLevels.filter(function (option) {\n        // 獲取選項等級的數字部分\n        var optionLevelNum = parseInt(option.value.split('_')[1]);\n        // 獲取當前用戶等級的數字部分\n        var userLevelNum = parseInt(currentUser.value.securityLevel.split('_')[1]);\n        // 只返回不高於當前用戶等級的選項（數字不小於用戶等級）\n        return optionLevelNum >= userLevelNum;\n      });\n    });\n\n    // 低權限員工列表（用於特殊權限設定）\n    var lowerLevelEmployees = computed(function () {\n      if (!currentUser.value || !currentUser.value.securityLevel || !employees.value) return [];\n\n      // 根據當前用戶權限過濾低權限員工\n      var currentLevel = currentUser.value.securityLevel;\n      return employees.value.filter(function (emp) {\n        var empLevel = emp.securityLevel;\n\n        // 安全等級數字越小權限越高\n        return empLevel > currentLevel && emp.id !== currentUser.value.id;\n      });\n    });\n\n    // 特殊查看權限的員工顯示列表\n    var specialViewersDisplay = computed(function () {\n      if (!selectedEvent.value || !selectedEvent.value.specialViewerIds || !employees.value) return [];\n      return employees.value.filter(function (emp) {\n        return selectedEvent.value.specialViewerIds.includes(emp.id);\n      });\n    });\n\n    // 用戶權限相關\n    var isEventCreator = computed(function () {\n      return selectedEvent.value && currentUser.value && selectedEvent.value.creatorId === currentUser.value.id;\n    });\n    var canEditEvent = computed(function () {\n      return isEventCreator.value;\n    });\n    var canDeleteEvent = computed(function () {\n      return isEventCreator.value;\n    });\n    var canGrantSpecialPermissions = computed(function () {\n      return !!currentUser.value;\n    });\n\n    // 監聽月份和年份變化，重新加載事件\n    watch([selectedMonth, selectedYear], /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return store.dispatch('calendar/setCurrentDate', moment([selectedYear.value, selectedMonth.value - 1, 1]).format('YYYY-MM-DD'));\n          case 2:\n            loadEvents();\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    })));\n\n    // 加載指定月份的事件\n    var loadEvents = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return store.dispatch('calendar/fetchMonthEvents');\n            case 3:\n              _context2.next = 8;\n              break;\n            case 5:\n              _context2.prev = 5;\n              _context2.t0 = _context2[\"catch\"](0);\n              toast.add({\n                severity: 'error',\n                summary: '錯誤',\n                detail: '無法加載事件',\n                life: 3000\n              });\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[0, 5]]);\n      }));\n      return function loadEvents() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    // 導航到上一個月\n    var previousMonth = function previousMonth() {\n      if (selectedMonth.value === 1) {\n        selectedMonth.value = 12;\n        selectedYear.value--;\n      } else {\n        selectedMonth.value--;\n      }\n    };\n\n    // 導航到下一個月\n    var nextMonth = function nextMonth() {\n      if (selectedMonth.value === 12) {\n        selectedMonth.value = 1;\n        selectedYear.value++;\n      } else {\n        selectedMonth.value++;\n      }\n    };\n\n    // 導航到今天\n    var goToToday = function goToToday() {\n      selectedMonth.value = today.month() + 1;\n      selectedYear.value = today.year();\n    };\n\n    // 選擇日期\n    var selectDay = function selectDay(day) {\n      // 處理日期選擇，可以彈出該日事件列表等\n      if (day.isOtherMonth) return;\n\n      // 設置新事件的時間為選擇的日期\n      var selectedDate = moment(day.date);\n\n      // 重置並打開新事件對話框\n      resetNewEvent();\n      newEvent.value.startTime = selectedDate.hour(9).minute(0).second(0).toDate();\n      newEvent.value.endTime = selectedDate.hour(10).minute(0).second(0).toDate();\n\n      // 如果有事件，可以顯示一個選擇菜單\n      if (day.events && day.events.length > 0) {\n        // 此處可以實現一個事件選擇功能\n      } else {\n        // 直接打開新事件對話框\n        newEventDialog.value = true;\n      }\n    };\n\n    // 打開新事件對話框\n    var openNewEventDialog = function openNewEventDialog() {\n      resetNewEvent();\n\n      // 設置默認時間為今天\n      var now = moment();\n      newEvent.value.startTime = now.hour(9).minute(0).second(0).toDate();\n      newEvent.value.endTime = now.hour(10).minute(0).second(0).toDate();\n      newEventDialog.value = true;\n    };\n\n    // 重置新事件表單\n    var resetNewEvent = function resetNewEvent() {\n      var _currentUser$value;\n      newEvent.value = {\n        title: '',\n        description: '',\n        startTime: null,\n        endTime: null,\n        location: '',\n        securityLevel: ((_currentUser$value = currentUser.value) === null || _currentUser$value === void 0 ? void 0 : _currentUser$value.securityLevel) || null,\n        specialViewerIds: []\n      };\n    };\n\n    // 保存新事件\n    var saveNewEvent = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var _error$response;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              if (newEvent.value.title) {\n                _context3.next = 4;\n                break;\n              }\n              toast.add({\n                severity: 'warn',\n                summary: '提示',\n                detail: '請輸入事件標題',\n                life: 3000\n              });\n              return _context3.abrupt(\"return\");\n            case 4:\n              if (!(!newEvent.value.startTime || !newEvent.value.endTime)) {\n                _context3.next = 7;\n                break;\n              }\n              toast.add({\n                severity: 'warn',\n                summary: '提示',\n                detail: '請選擇開始和結束時間',\n                life: 3000\n              });\n              return _context3.abrupt(\"return\");\n            case 7:\n              if (!moment(newEvent.value.endTime).isBefore(moment(newEvent.value.startTime))) {\n                _context3.next = 10;\n                break;\n              }\n              toast.add({\n                severity: 'warn',\n                summary: '提示',\n                detail: '結束時間不能早於開始時間',\n                life: 3000\n              });\n              return _context3.abrupt(\"return\");\n            case 10:\n              savingEvent.value = true;\n              _context3.next = 13;\n              return store.dispatch('calendar/createEvent', newEvent.value);\n            case 13:\n              toast.add({\n                severity: 'success',\n                summary: '成功',\n                detail: '事件已創建',\n                life: 3000\n              });\n              newEventDialog.value = false;\n              resetNewEvent();\n\n              // 重新加載事件\n              _context3.next = 18;\n              return loadEvents();\n            case 18:\n              _context3.next = 23;\n              break;\n            case 20:\n              _context3.prev = 20;\n              _context3.t0 = _context3[\"catch\"](0);\n              toast.add({\n                severity: 'error',\n                summary: '錯誤',\n                detail: ((_error$response = _context3.t0.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || '創建事件失敗',\n                life: 3000\n              });\n            case 23:\n              _context3.prev = 23;\n              savingEvent.value = false;\n              return _context3.finish(23);\n            case 26:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, null, [[0, 20, 23, 26]]);\n      }));\n      return function saveNewEvent() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    // 打開事件詳情對話框\n    var openEventDetailsDialog = /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(event) {\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              selectedEvent.value = event;\n\n              // 獲取事件特殊權限\n              if (!isEventCreator.value) {\n                _context4.next = 10;\n                break;\n              }\n              _context4.prev = 2;\n              _context4.next = 5;\n              return store.dispatch('calendar/fetchEventPermissions', event.id);\n            case 5:\n              _context4.next = 10;\n              break;\n            case 7:\n              _context4.prev = 7;\n              _context4.t0 = _context4[\"catch\"](2);\n              console.error('無法獲取事件權限:', _context4.t0);\n            case 10:\n              eventDetailsDialog.value = true;\n            case 11:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, null, [[2, 7]]);\n      }));\n      return function openEventDetailsDialog(_x) {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n\n    // 編輯事件\n    var editEvent = function editEvent() {\n      if (!selectedEvent.value) return;\n\n      // 複製事件對象進行編輯\n      editingEvent.value = JSON.parse(JSON.stringify(selectedEvent.value));\n\n      // 將字串日期轉換為Date物件\n      editingEvent.value.startTime = new Date(editingEvent.value.startTime);\n      editingEvent.value.endTime = new Date(editingEvent.value.endTime);\n\n      // 關閉詳情對話框，打開編輯對話框\n      eventDetailsDialog.value = false;\n      editEventDialog.value = true;\n    };\n\n    // 保存編輯的事件\n    var saveEditedEvent = /*#__PURE__*/function () {\n      var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var _error$response2;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.prev = 0;\n              if (editingEvent.value.title) {\n                _context5.next = 4;\n                break;\n              }\n              toast.add({\n                severity: 'warn',\n                summary: '提示',\n                detail: '請輸入事件標題',\n                life: 3000\n              });\n              return _context5.abrupt(\"return\");\n            case 4:\n              if (!(!editingEvent.value.startTime || !editingEvent.value.endTime)) {\n                _context5.next = 7;\n                break;\n              }\n              toast.add({\n                severity: 'warn',\n                summary: '提示',\n                detail: '請選擇開始和結束時間',\n                life: 3000\n              });\n              return _context5.abrupt(\"return\");\n            case 7:\n              if (!moment(editingEvent.value.endTime).isBefore(moment(editingEvent.value.startTime))) {\n                _context5.next = 10;\n                break;\n              }\n              toast.add({\n                severity: 'warn',\n                summary: '提示',\n                detail: '結束時間不能早於開始時間',\n                life: 3000\n              });\n              return _context5.abrupt(\"return\");\n            case 10:\n              savingEvent.value = true;\n              _context5.next = 13;\n              return store.dispatch('calendar/updateEvent', {\n                id: editingEvent.value.id,\n                eventData: editingEvent.value\n              });\n            case 13:\n              toast.add({\n                severity: 'success',\n                summary: '成功',\n                detail: '事件已更新',\n                life: 3000\n              });\n              editEventDialog.value = false;\n              editingEvent.value = null;\n\n              // 重新加載事件\n              _context5.next = 18;\n              return loadEvents();\n            case 18:\n              _context5.next = 23;\n              break;\n            case 20:\n              _context5.prev = 20;\n              _context5.t0 = _context5[\"catch\"](0);\n              toast.add({\n                severity: 'error',\n                summary: '錯誤',\n                detail: ((_error$response2 = _context5.t0.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || '更新事件失敗',\n                life: 3000\n              });\n            case 23:\n              _context5.prev = 23;\n              savingEvent.value = false;\n              return _context5.finish(23);\n            case 26:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, null, [[0, 20, 23, 26]]);\n      }));\n      return function saveEditedEvent() {\n        return _ref5.apply(this, arguments);\n      };\n    }();\n\n    // 確認刪除事件\n    var confirmDeleteEvent = function confirmDeleteEvent() {\n      confirm.require({\n        message: '確定要刪除此事件嗎？',\n        header: '刪除確認',\n        icon: 'pi pi-exclamation-triangle',\n        acceptLabel: '確定',\n        rejectLabel: '取消',\n        accept: function accept() {\n          return deleteEvent();\n        }\n      });\n    };\n\n    // 刪除事件\n    var deleteEvent = /*#__PURE__*/function () {\n      var _ref6 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        var _error$response3;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              if (selectedEvent.value) {\n                _context6.next = 2;\n                break;\n              }\n              return _context6.abrupt(\"return\");\n            case 2:\n              _context6.prev = 2;\n              _context6.next = 5;\n              return store.dispatch('calendar/deleteEvent', selectedEvent.value.id);\n            case 5:\n              toast.add({\n                severity: 'success',\n                summary: '成功',\n                detail: '事件已刪除',\n                life: 3000\n              });\n              eventDetailsDialog.value = false;\n              selectedEvent.value = null;\n\n              // 重新加載事件\n              _context6.next = 10;\n              return loadEvents();\n            case 10:\n              _context6.next = 15;\n              break;\n            case 12:\n              _context6.prev = 12;\n              _context6.t0 = _context6[\"catch\"](2);\n              toast.add({\n                severity: 'error',\n                summary: '錯誤',\n                detail: ((_error$response3 = _context6.t0.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || '刪除事件失敗',\n                life: 3000\n              });\n            case 15:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6, null, [[2, 12]]);\n      }));\n      return function deleteEvent() {\n        return _ref6.apply(this, arguments);\n      };\n    }();\n\n    // 工具方法\n    var formatEventTime = function formatEventTime(event) {\n      var start = moment(event.startTime);\n      return start.format('HH:mm');\n    };\n    var formatEventDateTime = function formatEventDateTime(event) {\n      var start = moment(event.startTime);\n      var end = moment(event.endTime);\n      if (start.isSame(end, 'day')) {\n        return \"\".concat(start.format('YYYY/MM/DD HH:mm'), \" - \").concat(end.format('HH:mm'));\n      } else {\n        return \"\".concat(start.format('YYYY/MM/DD HH:mm'), \" - \").concat(end.format('YYYY/MM/DD HH:mm'));\n      }\n    };\n    var getEventClass = function getEventClass(event) {\n      if (!event.securityLevel) return '';\n      switch (event.securityLevel) {\n        case 'LEVEL_1':\n          return 'event-level1';\n        case 'LEVEL_2':\n          return 'event-level2';\n        case 'LEVEL_3':\n          return 'event-level3';\n        case 'LEVEL_4':\n          return 'event-level4';\n        default:\n          return '';\n      }\n    };\n    var getSecurityLevelName = function getSecurityLevelName(level) {\n      var _securityLevels$value;\n      if (!securityLevels.value || !level) return level;\n      return ((_securityLevels$value = securityLevels.value[level]) === null || _securityLevels$value === void 0 ? void 0 : _securityLevels$value.description) || level;\n    };\n\n    // 初始化\n    onMounted(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n      return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n        while (1) switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.prev = 0;\n            _context7.next = 3;\n            return store.dispatch('employee/fetchSecurityLevels');\n          case 3:\n            _context7.next = 8;\n            break;\n          case 5:\n            _context7.prev = 5;\n            _context7.t0 = _context7[\"catch\"](0);\n            console.error('無法加載安全等級:', _context7.t0);\n          case 8:\n            _context7.prev = 8;\n            _context7.next = 11;\n            return store.dispatch('employee/fetchActiveEmployees');\n          case 11:\n            _context7.next = 16;\n            break;\n          case 13:\n            _context7.prev = 13;\n            _context7.t1 = _context7[\"catch\"](8);\n            console.error('無法加載員工列表:', _context7.t1);\n          case 16:\n            _context7.next = 18;\n            return store.dispatch('calendar/setCurrentDate', moment([selectedYear.value, selectedMonth.value - 1, 1]).format('YYYY-MM-DD'));\n          case 18:\n            _context7.next = 20;\n            return loadEvents();\n          case 20:\n          case \"end\":\n            return _context7.stop();\n        }\n      }, _callee7, null, [[0, 5], [8, 13]]);\n    })));\n    return {\n      // 日期相關\n      currentDate: currentDate,\n      selectedMonth: selectedMonth,\n      selectedYear: selectedYear,\n      weekdays: weekdays,\n      months: months,\n      years: years,\n      currentMonthYear: currentMonthYear,\n      calendarDays: calendarDays,\n      // 對話框狀態\n      newEventDialog: newEventDialog,\n      eventDetailsDialog: eventDetailsDialog,\n      editEventDialog: editEventDialog,\n      // 事件相關\n      newEvent: newEvent,\n      selectedEvent: selectedEvent,\n      editingEvent: editingEvent,\n      savingEvent: savingEvent,\n      securityLevelOptions: securityLevelOptions,\n      lowerLevelEmployees: lowerLevelEmployees,\n      specialViewersDisplay: specialViewersDisplay,\n      // 計算屬性\n      isEventCreator: isEventCreator,\n      canEditEvent: canEditEvent,\n      canDeleteEvent: canDeleteEvent,\n      canGrantSpecialPermissions: canGrantSpecialPermissions,\n      // 方法\n      previousMonth: previousMonth,\n      nextMonth: nextMonth,\n      goToToday: goToToday,\n      selectDay: selectDay,\n      openNewEventDialog: openNewEventDialog,\n      resetNewEvent: resetNewEvent,\n      saveNewEvent: saveNewEvent,\n      openEventDetailsDialog: openEventDetailsDialog,\n      editEvent: editEvent,\n      saveEditedEvent: saveEditedEvent,\n      confirmDeleteEvent: confirmDeleteEvent,\n      deleteEvent: deleteEvent,\n      formatEventTime: formatEventTime,\n      formatEventDateTime: formatEventDateTime,\n      getEventClass: getEventClass,\n      getSecurityLevelName: getSecurityLevelName\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","watch","onMounted","useStore","useToast","useConfirm","moment","name","setup","store","toast","confirm","today","currentDate","selectedMonth","month","selectedYear","year","newEventDialog","eventDetailsDialog","editEventDialog","newEvent","title","description","startTime","endTime","location","securityLevel","specialViewerIds","selectedEvent","editingEvent","savingEvent","currentUser","getters","events","securityLevels","employees","calendarDays","days","calendarDate","value","monthStart","clone","startOf","monthEnd","endOf","calendarStart","calendarEnd","daysInCalendar","diff","add","day","isSameOrBefore","isOtherMonth","dayEvents","filter","event","start","end","isBetween","push","date","format","dayNumber","isToday","isSame","weekdays","months","years","currentYear","yearOptions","i","currentMonthYear","concat","find","m","securityLevelOptions","allLevels","Object","keys","map","level","option","optionLevelNum","parseInt","split","userLevelNum","lowerLevelEmployees","currentLevel","emp","empLevel","id","specialViewersDisplay","includes","isEventCreator","creatorId","canEditEvent","canDeleteEvent","canGrantSpecialPermissions","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","dispatch","loadEvents","stop","_ref2","_callee2","_callee2$","_context2","t0","severity","summary","detail","life","apply","arguments","previousMonth","nextMonth","goToToday","selectDay","selectedDate","resetNewEvent","hour","minute","second","toDate","length","openNewEventDialog","now","_currentUser$value","saveNewEvent","_ref3","_callee3","_error$response","_callee3$","_context3","abrupt","isBefore","response","data","finish","openEventDetailsDialog","_ref4","_callee4","_callee4$","_context4","console","error","_x","editEvent","JSON","parse","stringify","Date","saveEditedEvent","_ref5","_callee5","_error$response2","_callee5$","_context5","eventData","confirmDeleteEvent","require","message","header","icon","acceptLabel","rejectLabel","accept","deleteEvent","_ref6","_callee6","_error$response3","_callee6$","_context6","formatEventTime","formatEventDateTime","getEventClass","getSecurityLevelName","_securityLevels$value","_callee7","_callee7$","_context7","t1"],"sources":["/Users/lidiannan/Documents/GitHub/calendar2/frontend/src/components/Calendar.vue"],"sourcesContent":["<template>\n  <div class=\"calendar-container\">\n    <div class=\"calendar-header\">\n      <h1>行事曆 - {{ currentMonthYear }}</h1>\n      \n      <div class=\"calendar-controls\">\n        <Button icon=\"pi pi-chevron-left\" @click=\"previousMonth\" class=\"p-button-rounded p-button-outlined\" />\n        <Button @click=\"goToToday\" label=\"今天\" class=\"p-button-outlined\" />\n        <Button icon=\"pi pi-chevron-right\" @click=\"nextMonth\" class=\"p-button-rounded p-button-outlined\" />\n        \n        <Dropdown v-model=\"selectedMonth\" :options=\"months\" optionLabel=\"name\" optionValue=\"value\" class=\"month-dropdown\" />\n        <Dropdown v-model=\"selectedYear\" :options=\"years\" class=\"year-dropdown\" />\n      </div>\n      \n      <div class=\"calendar-actions\">\n        <Button label=\"新增事件\" icon=\"pi pi-plus\" @click=\"openNewEventDialog\" />\n      </div>\n    </div>\n    \n    <div class=\"calendar-content\">\n      <div class=\"calendar-weekdays\">\n        <div class=\"weekday\" v-for=\"day in weekdays\" :key=\"day\">{{ day }}</div>\n      </div>\n      \n      <div class=\"calendar-days\">\n        <div \n          v-for=\"day in calendarDays\" \n          :key=\"day.date\" \n          class=\"calendar-day\" \n          :class=\"{ \n            'other-month': day.isOtherMonth, \n            'today': day.isToday,\n            'has-events': day.events && day.events.length > 0\n          }\"\n          @click=\"selectDay(day)\"\n        >\n          <div class=\"day-number\">{{ day.dayNumber }}</div>\n          \n          <div class=\"day-events\">\n            <div \n              v-for=\"event in day.events\" \n              :key=\"event.id\" \n              class=\"day-event\" \n              :class=\"getEventClass(event)\"\n              @click.stop=\"openEventDetailsDialog(event)\"\n            >\n              <span class=\"event-time\">{{ formatEventTime(event) }}</span>\n              <span class=\"event-title\">{{ event.title }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- 新增事件對話框 -->\n    <Dialog v-model:visible=\"newEventDialog\" header=\"新增事件\" :style=\"{ width: '500px' }\" :modal=\"true\">\n      <div class=\"p-fluid\">\n        <div class=\"p-field\">\n          <label for=\"event-title\">標題</label>\n          <InputText id=\"event-title\" v-model.trim=\"newEvent.title\" placeholder=\"事件標題\" />\n        </div>\n        \n        <div class=\"p-field\">\n          <label for=\"event-description\">描述</label>\n          <Textarea id=\"event-description\" v-model=\"newEvent.description\" rows=\"3\" placeholder=\"事件描述\" />\n        </div>\n        \n        <div class=\"p-field\">\n          <label for=\"event-start\">開始時間</label>\n          <Calendar id=\"event-start\" v-model=\"newEvent.startTime\" showTime hourFormat=\"24\" placeholder=\"開始時間\" />\n        </div>\n        \n        <div class=\"p-field\">\n          <label for=\"event-end\">結束時間</label>\n          <Calendar id=\"event-end\" v-model=\"newEvent.endTime\" showTime hourFormat=\"24\" placeholder=\"結束時間\" />\n        </div>\n        \n        <div class=\"p-field\">\n          <label for=\"event-location\">地點</label>\n          <InputText id=\"event-location\" v-model.trim=\"newEvent.location\" placeholder=\"事件地點\" />\n        </div>\n        \n        <div class=\"p-field\">\n          <label for=\"event-security-level\">安全等級</label>\n          <Dropdown id=\"event-security-level\" v-model=\"newEvent.securityLevel\" :options=\"securityLevelOptions\" optionLabel=\"name\" optionValue=\"value\" placeholder=\"選擇安全等級\" />\n        </div>\n        \n        <div class=\"p-field\" v-if=\"newEvent.securityLevel && canGrantSpecialPermissions\">\n          <label for=\"event-special-viewers\">特殊查看權限</label>\n          <MultiSelect\n            id=\"event-special-viewers\"\n            v-model=\"newEvent.specialViewerIds\"\n            :options=\"lowerLevelEmployees\"\n            optionLabel=\"fullName\"\n            optionValue=\"id\"\n            placeholder=\"可選擇低權限員工\"\n            display=\"chip\"\n          />\n        </div>\n      </div>\n      \n      <template #footer>\n        <Button label=\"取消\" icon=\"pi pi-times\" class=\"p-button-text\" @click=\"newEventDialog = false\" />\n        <Button label=\"儲存\" icon=\"pi pi-check\" @click=\"saveNewEvent\" :loading=\"savingEvent\" />\n      </template>\n    </Dialog>\n    \n    <!-- 事件詳情對話框 -->\n    <Dialog v-model:visible=\"eventDetailsDialog\" :header=\"selectedEvent?.title || '事件詳情'\" :style=\"{ width: '500px' }\" :modal=\"true\">\n      <div v-if=\"selectedEvent\" class=\"event-details\">\n        <div class=\"event-detail-item\">\n          <span class=\"detail-label\">時間：</span>\n          <span class=\"detail-value\">{{ formatEventDateTime(selectedEvent) }}</span>\n        </div>\n        \n        <div class=\"event-detail-item\">\n          <span class=\"detail-label\">地點：</span>\n          <span class=\"detail-value\">{{ selectedEvent.location || '無地點' }}</span>\n        </div>\n        \n        <div class=\"event-detail-item\">\n          <span class=\"detail-label\">安全等級：</span>\n          <span class=\"detail-value\">{{ getSecurityLevelName(selectedEvent.securityLevel) }}</span>\n        </div>\n        \n        <div class=\"event-detail-item\">\n          <span class=\"detail-label\">創建者：</span>\n          <span class=\"detail-value\">{{ selectedEvent.creatorUsername }}</span>\n        </div>\n        \n        <Divider />\n        \n        <div class=\"event-description\">\n          <h3>事件描述</h3>\n          <p>{{ selectedEvent.description || '無描述' }}</p>\n        </div>\n        \n        <div v-if=\"isEventCreator && specialViewersDisplay.length > 0\" class=\"event-special-viewers\">\n          <h3>特殊權限人員</h3>\n          <ul>\n            <li v-for=\"viewer in specialViewersDisplay\" :key=\"viewer.id\">\n              {{ viewer.fullName }}\n            </li>\n          </ul>\n        </div>\n      </div>\n      \n      <template #footer>\n        <div class=\"event-actions\">\n          <Button v-if=\"canEditEvent\" label=\"編輯\" icon=\"pi pi-pencil\" class=\"p-button-secondary\" @click=\"editEvent\" />\n          <Button v-if=\"canDeleteEvent\" label=\"刪除\" icon=\"pi pi-trash\" class=\"p-button-danger\" @click=\"confirmDeleteEvent\" />\n          <Button label=\"關閉\" icon=\"pi pi-times\" class=\"p-button-text\" @click=\"eventDetailsDialog = false\" />\n        </div>\n      </template>\n    </Dialog>\n    \n    <!-- 編輯事件對話框 -->\n    <Dialog v-model:visible=\"editEventDialog\" header=\"編輯事件\" :style=\"{ width: '500px' }\" :modal=\"true\">\n      <div v-if=\"editingEvent\" class=\"p-fluid\">\n        <div class=\"p-field\">\n          <label for=\"edit-event-title\">標題</label>\n          <InputText id=\"edit-event-title\" v-model.trim=\"editingEvent.title\" placeholder=\"事件標題\" />\n        </div>\n        \n        <div class=\"p-field\">\n          <label for=\"edit-event-description\">描述</label>\n          <Textarea id=\"edit-event-description\" v-model=\"editingEvent.description\" rows=\"3\" placeholder=\"事件描述\" />\n        </div>\n        \n        <div class=\"p-field\">\n          <label for=\"edit-event-start\">開始時間</label>\n          <Calendar id=\"edit-event-start\" v-model=\"editingEvent.startTime\" showTime hourFormat=\"24\" placeholder=\"開始時間\" />\n        </div>\n        \n        <div class=\"p-field\">\n          <label for=\"edit-event-end\">結束時間</label>\n          <Calendar id=\"edit-event-end\" v-model=\"editingEvent.endTime\" showTime hourFormat=\"24\" placeholder=\"結束時間\" />\n        </div>\n        \n        <div class=\"p-field\">\n          <label for=\"edit-event-location\">地點</label>\n          <InputText id=\"edit-event-location\" v-model.trim=\"editingEvent.location\" placeholder=\"事件地點\" />\n        </div>\n        \n        <div class=\"p-field\">\n          <label for=\"edit-event-security-level\">安全等級</label>\n          <Dropdown id=\"edit-event-security-level\" v-model=\"editingEvent.securityLevel\" :options=\"securityLevelOptions\" optionLabel=\"name\" optionValue=\"value\" placeholder=\"選擇安全等級\" />\n        </div>\n        \n        <div class=\"p-field\" v-if=\"editingEvent.securityLevel && canGrantSpecialPermissions\">\n          <label for=\"edit-event-special-viewers\">特殊查看權限</label>\n          <MultiSelect\n            id=\"edit-event-special-viewers\"\n            v-model=\"editingEvent.specialViewerIds\"\n            :options=\"lowerLevelEmployees\"\n            optionLabel=\"fullName\"\n            optionValue=\"id\"\n            placeholder=\"可選擇低權限員工\"\n            display=\"chip\"\n          />\n        </div>\n      </div>\n      \n      <template #footer>\n        <Button label=\"取消\" icon=\"pi pi-times\" class=\"p-button-text\" @click=\"editEventDialog = false\" />\n        <Button label=\"儲存\" icon=\"pi pi-check\" @click=\"saveEditedEvent\" :loading=\"savingEvent\" />\n      </template>\n    </Dialog>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, watch, onMounted } from 'vue'\nimport { useStore } from 'vuex'\nimport { useToast } from 'primevue/usetoast'\nimport { useConfirm } from 'primevue/useconfirm'\nimport moment from 'moment'\n\nexport default {\n  name: 'CalendarComponent',\n  \n  setup() {\n    const store = useStore()\n    const toast = useToast()\n    const confirm = useConfirm()\n    \n    // 日期相關\n    const today = moment()\n    const currentDate = ref(today)\n    const selectedMonth = ref(today.month() + 1)\n    const selectedYear = ref(today.year())\n    \n    // 對話框狀態\n    const newEventDialog = ref(false)\n    const eventDetailsDialog = ref(false)\n    const editEventDialog = ref(false)\n    \n    // 事件相關\n    const newEvent = ref({\n      title: '',\n      description: '',\n      startTime: null,\n      endTime: null,\n      location: '',\n      securityLevel: null,\n      specialViewerIds: []\n    })\n    \n    const selectedEvent = ref(null)\n    const editingEvent = ref(null)\n    const savingEvent = ref(false)\n    \n    // 計算屬性\n    const currentUser = computed(() => store.getters['auth/currentUser'])\n    const events = computed(() => store.getters['calendar/events'])\n    const securityLevels = computed(() => store.getters['employee/securityLevels'])\n    const employees = computed(() => store.getters['employee/employees'])\n    \n    // 日曆上顯示的日期\n    const calendarDays = computed(() => {\n      const days = []\n      const calendarDate = moment([selectedYear.value, selectedMonth.value - 1, 1])\n      const monthStart = calendarDate.clone().startOf('month')\n      const monthEnd = calendarDate.clone().endOf('month')\n      const calendarStart = monthStart.clone().startOf('week')\n      const calendarEnd = monthEnd.clone().endOf('week')\n      \n      // 檢查是否需要顯示六週（有些月份在日曆上可能需要六行）\n      let daysInCalendar = calendarEnd.diff(calendarStart, 'days') + 1\n      if (daysInCalendar < 42) {\n        calendarEnd.add(7, 'days')\n      }\n      \n      // 生成日曆的所有日期\n      let day = calendarStart.clone()\n      while (day.isSameOrBefore(calendarEnd)) {\n        const isOtherMonth = day.month() !== monthStart.month()\n        const dayEvents = events.value.filter(event => {\n          const start = moment(event.startTime)\n          const end = moment(event.endTime)\n          return day.isBetween(start, end, 'day', '[]')\n        })\n        \n        days.push({\n          date: day.format('YYYY-MM-DD'),\n          dayNumber: day.date(),\n          isOtherMonth,\n          isToday: day.isSame(today, 'day'),\n          events: dayEvents\n        })\n        \n        day = day.add(1, 'day')\n      }\n      \n      return days\n    })\n    \n    const weekdays = ref(['日', '一', '二', '三', '四', '五', '六'])\n    \n    const months = ref([\n      { name: '一月', value: 1 },\n      { name: '二月', value: 2 },\n      { name: '三月', value: 3 },\n      { name: '四月', value: 4 },\n      { name: '五月', value: 5 },\n      { name: '六月', value: 6 },\n      { name: '七月', value: 7 },\n      { name: '八月', value: 8 },\n      { name: '九月', value: 9 },\n      { name: '十月', value: 10 },\n      { name: '十一月', value: 11 },\n      { name: '十二月', value: 12 }\n    ])\n    \n    const years = computed(() => {\n      const currentYear = today.year()\n      const yearOptions = []\n      for (let i = currentYear - 5; i <= currentYear + 5; i++) {\n        yearOptions.push(i)\n      }\n      return yearOptions\n    })\n    \n    const currentMonthYear = computed(() => {\n      return `${selectedYear.value}年 ${months.value.find(m => m.value === selectedMonth.value).name}`\n    })\n    \n    // 安全等級選項\n    const securityLevelOptions = computed(() => {\n      if (!securityLevels.value) return []\n      \n      // 獲取所有安全等級\n      const allLevels = Object.keys(securityLevels.value).map(level => ({\n        name: securityLevels.value[level].description,\n        value: level\n      }))\n      \n      // 如果沒有當前用戶或沒有安全等級，返回所有選項\n      if (!currentUser.value || !currentUser.value.securityLevel) return allLevels\n      \n      // 根據當前用戶安全等級過濾選項\n      // 安全等級數字越小權限越高\n      // LEVEL_1: 最高權限, LEVEL_2: 高級權限, LEVEL_3: 中級權限, LEVEL_4: 基本權限\n      return allLevels.filter(option => {\n        // 獲取選項等級的數字部分\n        const optionLevelNum = parseInt(option.value.split('_')[1])\n        // 獲取當前用戶等級的數字部分\n        const userLevelNum = parseInt(currentUser.value.securityLevel.split('_')[1])\n        // 只返回不高於當前用戶等級的選項（數字不小於用戶等級）\n        return optionLevelNum >= userLevelNum\n      })\n    })\n    \n    // 低權限員工列表（用於特殊權限設定）\n    const lowerLevelEmployees = computed(() => {\n      if (!currentUser.value || !currentUser.value.securityLevel || !employees.value) return []\n      \n      // 根據當前用戶權限過濾低權限員工\n      const currentLevel = currentUser.value.securityLevel\n      return employees.value.filter(emp => {\n        const empLevel = emp.securityLevel\n        \n        // 安全等級數字越小權限越高\n        return empLevel > currentLevel && emp.id !== currentUser.value.id\n      })\n    })\n    \n    // 特殊查看權限的員工顯示列表\n    const specialViewersDisplay = computed(() => {\n      if (!selectedEvent.value || !selectedEvent.value.specialViewerIds || !employees.value) return []\n      \n      return employees.value.filter(emp => \n        selectedEvent.value.specialViewerIds.includes(emp.id)\n      )\n    })\n    \n    // 用戶權限相關\n    const isEventCreator = computed(() => {\n      return selectedEvent.value && currentUser.value && \n             selectedEvent.value.creatorId === currentUser.value.id\n    })\n    \n    const canEditEvent = computed(() => isEventCreator.value)\n    \n    const canDeleteEvent = computed(() => isEventCreator.value)\n    \n    const canGrantSpecialPermissions = computed(() => !!currentUser.value)\n    \n    // 監聽月份和年份變化，重新加載事件\n    watch([selectedMonth, selectedYear], async () => {\n      await store.dispatch('calendar/setCurrentDate', \n        moment([selectedYear.value, selectedMonth.value - 1, 1]).format('YYYY-MM-DD')\n      )\n      loadEvents()\n    })\n    \n    // 加載指定月份的事件\n    const loadEvents = async () => {\n      try {\n        await store.dispatch('calendar/fetchMonthEvents')\n      } catch (error) {\n        toast.add({\n          severity: 'error',\n          summary: '錯誤',\n          detail: '無法加載事件',\n          life: 3000\n        })\n      }\n    }\n    \n    // 導航到上一個月\n    const previousMonth = () => {\n      if (selectedMonth.value === 1) {\n        selectedMonth.value = 12\n        selectedYear.value--\n      } else {\n        selectedMonth.value--\n      }\n    }\n    \n    // 導航到下一個月\n    const nextMonth = () => {\n      if (selectedMonth.value === 12) {\n        selectedMonth.value = 1\n        selectedYear.value++\n      } else {\n        selectedMonth.value++\n      }\n    }\n    \n    // 導航到今天\n    const goToToday = () => {\n      selectedMonth.value = today.month() + 1\n      selectedYear.value = today.year()\n    }\n    \n    // 選擇日期\n    const selectDay = (day) => {\n      // 處理日期選擇，可以彈出該日事件列表等\n      if (day.isOtherMonth) return\n      \n      // 設置新事件的時間為選擇的日期\n      const selectedDate = moment(day.date)\n      \n      // 重置並打開新事件對話框\n      resetNewEvent()\n      newEvent.value.startTime = selectedDate.hour(9).minute(0).second(0).toDate()\n      newEvent.value.endTime = selectedDate.hour(10).minute(0).second(0).toDate()\n      \n      // 如果有事件，可以顯示一個選擇菜單\n      if (day.events && day.events.length > 0) {\n        // 此處可以實現一個事件選擇功能\n      } else {\n        // 直接打開新事件對話框\n        newEventDialog.value = true\n      }\n    }\n    \n    // 打開新事件對話框\n    const openNewEventDialog = () => {\n      resetNewEvent()\n      \n      // 設置默認時間為今天\n      const now = moment()\n      newEvent.value.startTime = now.hour(9).minute(0).second(0).toDate()\n      newEvent.value.endTime = now.hour(10).minute(0).second(0).toDate()\n      \n      newEventDialog.value = true\n    }\n    \n    // 重置新事件表單\n    const resetNewEvent = () => {\n      newEvent.value = {\n        title: '',\n        description: '',\n        startTime: null,\n        endTime: null,\n        location: '',\n        securityLevel: currentUser.value?.securityLevel || null,\n        specialViewerIds: []\n      }\n    }\n    \n    // 保存新事件\n    const saveNewEvent = async () => {\n      try {\n        // 表單驗證\n        if (!newEvent.value.title) {\n          toast.add({\n            severity: 'warn',\n            summary: '提示',\n            detail: '請輸入事件標題',\n            life: 3000\n          })\n          return\n        }\n        \n        if (!newEvent.value.startTime || !newEvent.value.endTime) {\n          toast.add({\n            severity: 'warn',\n            summary: '提示',\n            detail: '請選擇開始和結束時間',\n            life: 3000\n          })\n          return\n        }\n        \n        if (moment(newEvent.value.endTime).isBefore(moment(newEvent.value.startTime))) {\n          toast.add({\n            severity: 'warn',\n            summary: '提示',\n            detail: '結束時間不能早於開始時間',\n            life: 3000\n          })\n          return\n        }\n        \n        savingEvent.value = true\n        \n        await store.dispatch('calendar/createEvent', newEvent.value)\n        \n        toast.add({\n          severity: 'success',\n          summary: '成功',\n          detail: '事件已創建',\n          life: 3000\n        })\n        \n        newEventDialog.value = false\n        resetNewEvent()\n        \n        // 重新加載事件\n        await loadEvents()\n      } catch (error) {\n        toast.add({\n          severity: 'error',\n          summary: '錯誤',\n          detail: error.response?.data || '創建事件失敗',\n          life: 3000\n        })\n      } finally {\n        savingEvent.value = false\n      }\n    }\n    \n    // 打開事件詳情對話框\n    const openEventDetailsDialog = async (event) => {\n      selectedEvent.value = event\n      \n      // 獲取事件特殊權限\n      if (isEventCreator.value) {\n        try {\n          await store.dispatch('calendar/fetchEventPermissions', event.id)\n        } catch (error) {\n          console.error('無法獲取事件權限:', error)\n        }\n      }\n      \n      eventDetailsDialog.value = true\n    }\n    \n    // 編輯事件\n    const editEvent = () => {\n      if (!selectedEvent.value) return\n      \n      // 複製事件對象進行編輯\n      editingEvent.value = JSON.parse(JSON.stringify(selectedEvent.value))\n      \n      // 將字串日期轉換為Date物件\n      editingEvent.value.startTime = new Date(editingEvent.value.startTime)\n      editingEvent.value.endTime = new Date(editingEvent.value.endTime)\n      \n      // 關閉詳情對話框，打開編輯對話框\n      eventDetailsDialog.value = false\n      editEventDialog.value = true\n    }\n    \n    // 保存編輯的事件\n    const saveEditedEvent = async () => {\n      try {\n        // 表單驗證\n        if (!editingEvent.value.title) {\n          toast.add({\n            severity: 'warn',\n            summary: '提示',\n            detail: '請輸入事件標題',\n            life: 3000\n          })\n          return\n        }\n        \n        if (!editingEvent.value.startTime || !editingEvent.value.endTime) {\n          toast.add({\n            severity: 'warn',\n            summary: '提示',\n            detail: '請選擇開始和結束時間',\n            life: 3000\n          })\n          return\n        }\n        \n        if (moment(editingEvent.value.endTime).isBefore(moment(editingEvent.value.startTime))) {\n          toast.add({\n            severity: 'warn',\n            summary: '提示',\n            detail: '結束時間不能早於開始時間',\n            life: 3000\n          })\n          return\n        }\n        \n        savingEvent.value = true\n        \n        await store.dispatch('calendar/updateEvent', {\n          id: editingEvent.value.id,\n          eventData: editingEvent.value\n        })\n        \n        toast.add({\n          severity: 'success',\n          summary: '成功',\n          detail: '事件已更新',\n          life: 3000\n        })\n        \n        editEventDialog.value = false\n        editingEvent.value = null\n        \n        // 重新加載事件\n        await loadEvents()\n      } catch (error) {\n        toast.add({\n          severity: 'error',\n          summary: '錯誤',\n          detail: error.response?.data || '更新事件失敗',\n          life: 3000\n        })\n      } finally {\n        savingEvent.value = false\n      }\n    }\n    \n    // 確認刪除事件\n    const confirmDeleteEvent = () => {\n      confirm.require({\n        message: '確定要刪除此事件嗎？',\n        header: '刪除確認',\n        icon: 'pi pi-exclamation-triangle',\n        acceptLabel: '確定',\n        rejectLabel: '取消',\n        accept: () => deleteEvent()\n      })\n    }\n    \n    // 刪除事件\n    const deleteEvent = async () => {\n      if (!selectedEvent.value) return\n      \n      try {\n        await store.dispatch('calendar/deleteEvent', selectedEvent.value.id)\n        \n        toast.add({\n          severity: 'success',\n          summary: '成功',\n          detail: '事件已刪除',\n          life: 3000\n        })\n        \n        eventDetailsDialog.value = false\n        selectedEvent.value = null\n        \n        // 重新加載事件\n        await loadEvents()\n      } catch (error) {\n        toast.add({\n          severity: 'error',\n          summary: '錯誤',\n          detail: error.response?.data || '刪除事件失敗',\n          life: 3000\n        })\n      }\n    }\n    \n    // 工具方法\n    const formatEventTime = (event) => {\n      const start = moment(event.startTime)\n      return start.format('HH:mm')\n    }\n    \n    const formatEventDateTime = (event) => {\n      const start = moment(event.startTime)\n      const end = moment(event.endTime)\n      \n      if (start.isSame(end, 'day')) {\n        return `${start.format('YYYY/MM/DD HH:mm')} - ${end.format('HH:mm')}`\n      } else {\n        return `${start.format('YYYY/MM/DD HH:mm')} - ${end.format('YYYY/MM/DD HH:mm')}`\n      }\n    }\n    \n    const getEventClass = (event) => {\n      if (!event.securityLevel) return ''\n      \n      switch (event.securityLevel) {\n        case 'LEVEL_1': return 'event-level1'\n        case 'LEVEL_2': return 'event-level2'\n        case 'LEVEL_3': return 'event-level3'\n        case 'LEVEL_4': return 'event-level4'\n        default: return ''\n      }\n    }\n    \n    const getSecurityLevelName = (level) => {\n      if (!securityLevels.value || !level) return level\n      \n      return securityLevels.value[level]?.description || level\n    }\n    \n    // 初始化\n    onMounted(async () => {\n      // 加載安全等級\n      try {\n        await store.dispatch('employee/fetchSecurityLevels')\n      } catch (error) {\n        console.error('無法加載安全等級:', error)\n      }\n      \n      // 加載員工列表\n      try {\n        await store.dispatch('employee/fetchActiveEmployees')\n      } catch (error) {\n        console.error('無法加載員工列表:', error)\n      }\n      \n      // 設置當前日期並加載事件\n      await store.dispatch('calendar/setCurrentDate', \n        moment([selectedYear.value, selectedMonth.value - 1, 1]).format('YYYY-MM-DD')\n      )\n      await loadEvents()\n    })\n    \n    return {\n      // 日期相關\n      currentDate,\n      selectedMonth,\n      selectedYear,\n      weekdays,\n      months,\n      years,\n      currentMonthYear,\n      calendarDays,\n      \n      // 對話框狀態\n      newEventDialog,\n      eventDetailsDialog,\n      editEventDialog,\n      \n      // 事件相關\n      newEvent,\n      selectedEvent,\n      editingEvent,\n      savingEvent,\n      securityLevelOptions,\n      lowerLevelEmployees,\n      specialViewersDisplay,\n      \n      // 計算屬性\n      isEventCreator,\n      canEditEvent,\n      canDeleteEvent,\n      canGrantSpecialPermissions,\n      \n      // 方法\n      previousMonth,\n      nextMonth,\n      goToToday,\n      selectDay,\n      openNewEventDialog,\n      resetNewEvent,\n      saveNewEvent,\n      openEventDetailsDialog,\n      editEvent,\n      saveEditedEvent,\n      confirmDeleteEvent,\n      deleteEvent,\n      formatEventTime,\n      formatEventDateTime,\n      getEventClass,\n      getSecurityLevelName\n    }\n  }\n}\n</script>\n\n<style scoped>\n.calendar-container {\n  background-color: #ffffff;\n  border-radius: 8px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);\n  padding: 1.5rem;\n}\n\n.calendar-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1.5rem;\n  flex-wrap: wrap;\n  gap: 1rem;\n}\n\n.calendar-header h1 {\n  margin: 0;\n  color: #3B82F6;\n  font-size: 1.8rem;\n}\n\n.calendar-controls {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.month-dropdown, .year-dropdown {\n  width: 120px;\n  margin-left: 0.5rem;\n}\n\n.calendar-weekdays {\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  gap: 4px;\n  margin-bottom: 4px;\n}\n\n.weekday {\n  text-align: center;\n  padding: 0.5rem;\n  font-weight: 600;\n  background-color: #f8f9fa;\n  border-radius: 4px;\n}\n\n.calendar-days {\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  gap: 4px;\n}\n\n.calendar-day {\n  position: relative;\n  min-height: 100px;\n  background-color: #fff;\n  border-radius: 4px;\n  border: 1px solid #e9ecef;\n  padding: 4px;\n  overflow: hidden;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.calendar-day:hover {\n  background-color: #f8f9fa;\n  border-color: #d4d4d4;\n}\n\n.day-number {\n  text-align: right;\n  margin-bottom: 4px;\n  font-weight: 600;\n}\n\n.other-month {\n  opacity: 0.6;\n  background-color: #f8f9fa;\n}\n\n.today {\n  border: 2px solid #3B82F6;\n}\n\n.has-events .day-number {\n  color: #3B82F6;\n}\n\n.day-events {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n  font-size: 0.8rem;\n}\n\n.day-event {\n  padding: 2px 4px;\n  border-radius: 3px;\n  background-color: #e6f2ff;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  cursor: pointer;\n  border-left: 3px solid #3B82F6;\n  transition: all 0.2s ease;\n}\n\n.day-event:hover {\n  transform: translateY(-1px);\n}\n\n.event-time {\n  font-weight: 600;\n  margin-right: 4px;\n}\n\n/* 不同安全等級的事件顏色 */\n.event-level1 {\n  background-color: #ffe6e6;\n  border-left-color: #ff4d4d;\n}\n\n.event-level2 {\n  background-color: #fff9e6;\n  border-left-color: #ffcc00;\n}\n\n.event-level3 {\n  background-color: #e6f9ff;\n  border-left-color: #33ccff;\n}\n\n.event-level4 {\n  background-color: #e6ffe6;\n  border-left-color: #33cc33;\n}\n\n/* 事件詳情 */\n.event-details {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n\n.event-detail-item {\n  display: flex;\n}\n\n.detail-label {\n  font-weight: 600;\n  width: 80px;\n}\n\n.event-description h3, .event-special-viewers h3 {\n  margin-top: 0.5rem;\n  margin-bottom: 0.5rem;\n  font-size: 1rem;\n}\n\n.event-actions {\n  display: flex;\n  gap: 0.5rem;\n}\n\n/* 響應式設計 */\n@media (max-width: 768px) {\n  .calendar-header {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n  \n  .calendar-weekdays, .calendar-days {\n    grid-template-columns: repeat(7, 1fr);\n  }\n  \n  .calendar-day {\n    min-height: 80px;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}