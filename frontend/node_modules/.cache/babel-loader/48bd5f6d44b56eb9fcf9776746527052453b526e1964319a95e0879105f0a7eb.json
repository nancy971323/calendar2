{"ast":null,"code":"import { createApp } from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport store from './store';\n\n// PrimeVue 相關導入\nimport PrimeVue from 'primevue/config';\nimport Button from 'primevue/button';\nimport InputText from 'primevue/inputtext';\nimport Password from 'primevue/password';\nimport Calendar from 'primevue/calendar';\nimport Dropdown from 'primevue/dropdown';\nimport Dialog from 'primevue/dialog';\nimport DataTable from 'primevue/datatable';\nimport Column from 'primevue/column';\nimport Textarea from 'primevue/textarea';\nimport Divider from 'primevue/divider';\nimport Card from 'primevue/card';\nimport Panel from 'primevue/panel';\nimport TabView from 'primevue/tabview';\nimport TabPanel from 'primevue/tabpanel';\nimport Menu from 'primevue/menu';\nimport Message from 'primevue/message';\nimport Toast from 'primevue/toast';\nimport ToastService from 'primevue/toastservice';\nimport ConfirmDialog from 'primevue/confirmdialog';\nimport ConfirmationService from 'primevue/confirmationservice';\nimport MultiSelect from 'primevue/multiselect';\n\n// PrimeVue 樣式\nimport 'primevue/resources/themes/saga-blue/theme.css';\nimport 'primevue/resources/primevue.min.css';\nimport 'primeicons/primeicons.css';\nimport 'primeflex/primeflex.css';\nconst app = createApp(App);\n\n// 註冊 PrimeVue 元件\napp.use(PrimeVue);\napp.use(ToastService);\napp.use(ConfirmationService);\napp.component('Button', Button);\napp.component('InputText', InputText);\napp.component('Password', Password);\napp.component('Calendar', Calendar);\napp.component('Dropdown', Dropdown);\napp.component('Dialog', Dialog);\napp.component('DataTable', DataTable);\napp.component('Column', Column);\napp.component('Textarea', Textarea);\napp.component('Divider', Divider);\napp.component('Card', Card);\napp.component('Panel', Panel);\napp.component('TabView', TabView);\napp.component('TabPanel', TabPanel);\napp.component('Menu', Menu);\napp.component('Message', Message);\napp.component('Toast', Toast);\napp.component('ConfirmDialog', ConfirmDialog);\napp.component('MultiSelect', MultiSelect);\n\n// 全局導航守衛\nrouter.beforeEach(async (to, from, next) => {\n  // 檢查路由是否需要認證\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    // 檢查是否已登入\n    if (!store.getters['auth/isAuthenticated']) {\n      // 嘗試從localStorage恢復身份驗證狀態\n      const token = localStorage.getItem('token');\n      if (token) {\n        try {\n          await store.dispatch('auth/checkAuth');\n          next(); // 已驗證，繼續導航\n          return;\n        } catch (error) {\n          console.error('Token驗證失敗:', error);\n          // 驗證失敗，清除token並跳轉到登入頁\n          localStorage.removeItem('token');\n        }\n      }\n      // 未登入或token驗證失敗，跳轉到登入頁\n      next({\n        path: '/login',\n        query: {\n          redirect: to.fullPath\n        } // 保存原目標路徑\n      });\n    } else {\n      next(); // 已登入，繼續導航\n    }\n  } else {\n    next(); // 不需要認證的路由，繼續導航\n  }\n});\napp.use(store);\napp.use(router);\napp.mount('#app');","map":{"version":3,"names":["createApp","App","router","store","PrimeVue","Button","InputText","Password","Calendar","Dropdown","Dialog","DataTable","Column","Textarea","Divider","Card","Panel","TabView","TabPanel","Menu","Message","Toast","ToastService","ConfirmDialog","ConfirmationService","MultiSelect","app","use","component","beforeEach","to","from","next","matched","some","record","meta","requiresAuth","getters","token","localStorage","getItem","dispatch","error","console","removeItem","path","query","redirect","fullPath","mount"],"sources":["/Users/lidiannan/Documents/GitHub/calendar2/frontend/src/main.js"],"sourcesContent":["import { createApp } from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport store from './store'\n\n// PrimeVue 相關導入\nimport PrimeVue from 'primevue/config'\nimport Button from 'primevue/button'\nimport InputText from 'primevue/inputtext'\nimport Password from 'primevue/password'\nimport Calendar from 'primevue/calendar'\nimport Dropdown from 'primevue/dropdown'\nimport Dialog from 'primevue/dialog'\nimport DataTable from 'primevue/datatable'\nimport Column from 'primevue/column'\nimport Textarea from 'primevue/textarea'\nimport Divider from 'primevue/divider'\nimport Card from 'primevue/card'\nimport Panel from 'primevue/panel'\nimport TabView from 'primevue/tabview'\nimport TabPanel from 'primevue/tabpanel'\nimport Menu from 'primevue/menu'\nimport Message from 'primevue/message'\nimport Toast from 'primevue/toast'\nimport ToastService from 'primevue/toastservice'\nimport ConfirmDialog from 'primevue/confirmdialog'\nimport ConfirmationService from 'primevue/confirmationservice'\nimport MultiSelect from 'primevue/multiselect'\n\n// PrimeVue 樣式\nimport 'primevue/resources/themes/saga-blue/theme.css'\nimport 'primevue/resources/primevue.min.css'\nimport 'primeicons/primeicons.css'\nimport 'primeflex/primeflex.css'\n\nconst app = createApp(App)\n\n// 註冊 PrimeVue 元件\napp.use(PrimeVue)\napp.use(ToastService)\napp.use(ConfirmationService)\n\napp.component('Button', Button)\napp.component('InputText', InputText)\napp.component('Password', Password)\napp.component('Calendar', Calendar)\napp.component('Dropdown', Dropdown)\napp.component('Dialog', Dialog)\napp.component('DataTable', DataTable)\napp.component('Column', Column)\napp.component('Textarea', Textarea)\napp.component('Divider', Divider)\napp.component('Card', Card)\napp.component('Panel', Panel)\napp.component('TabView', TabView)\napp.component('TabPanel', TabPanel)\napp.component('Menu', Menu)\napp.component('Message', Message)\napp.component('Toast', Toast)\napp.component('ConfirmDialog', ConfirmDialog)\napp.component('MultiSelect', MultiSelect)\n\n// 全局導航守衛\nrouter.beforeEach(async (to, from, next) => {\n  // 檢查路由是否需要認證\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    // 檢查是否已登入\n    if (!store.getters['auth/isAuthenticated']) {\n      // 嘗試從localStorage恢復身份驗證狀態\n      const token = localStorage.getItem('token')\n      if (token) {\n        try {\n          await store.dispatch('auth/checkAuth')\n          next() // 已驗證，繼續導航\n          return\n        } catch (error) {\n          console.error('Token驗證失敗:', error)\n          // 驗證失敗，清除token並跳轉到登入頁\n          localStorage.removeItem('token')\n        }\n      }\n      // 未登入或token驗證失敗，跳轉到登入頁\n      next({\n        path: '/login',\n        query: { redirect: to.fullPath } // 保存原目標路徑\n      })\n    } else {\n      next() // 已登入，繼續導航\n    }\n  } else {\n    next() // 不需要認證的路由，繼續導航\n  }\n})\n\napp.use(store)\napp.use(router)\n\napp.mount('#app')"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}