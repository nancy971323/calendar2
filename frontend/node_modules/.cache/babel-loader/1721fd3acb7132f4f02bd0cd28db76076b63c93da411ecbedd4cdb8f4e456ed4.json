{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementBlock as _createElementBlock } from \"vue\";\nvar _hoisted_1 = {\n  id: \"app\"\n};\nvar _hoisted_2 = {\n  \"class\": \"layout-container\"\n};\nvar _hoisted_3 = {\n  key: 0\n};\nvar _hoisted_4 = {\n  \"class\": \"header-content\"\n};\nvar _hoisted_5 = {\n  \"class\": \"header-logo\"\n};\nvar _hoisted_6 = {\n  \"class\": \"header-menu\"\n};\nvar _hoisted_7 = {\n  key: 0,\n  \"class\": \"header-user\"\n};\nvar _hoisted_8 = {\n  \"class\": \"user-info\"\n};\nvar _hoisted_9 = {\n  \"class\": \"main-content\"\n};\nvar _hoisted_10 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_Toast = _resolveComponent(\"Toast\");\n  var _component_ConfirmDialog = _resolveComponent(\"ConfirmDialog\");\n  var _component_router_link = _resolveComponent(\"router-link\");\n  var _component_Button = _resolveComponent(\"Button\");\n  var _component_router_view = _resolveComponent(\"router-view\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_Toast, {\n    position: \"top-right\"\n  }), _createVNode(_component_ConfirmDialog), _createElementVNode(\"div\", _hoisted_2, [$setup.isLoggedIn ? (_openBlock(), _createElementBlock(\"header\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_router_link, {\n    to: \"/\"\n  }, {\n    \"default\": _withCtx(function () {\n      return _cache[3] || (_cache[3] = [_createTextVNode(\"企業行事曆系統\")]);\n    }),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_Button, {\n    onClick: _cache[0] || (_cache[0] = function ($event) {\n      return _ctx.$router.push('/');\n    }),\n    label: \"首頁\",\n    icon: \"pi pi-home\",\n    \"class\": \"p-button-text\"\n  }), _createVNode(_component_Button, {\n    onClick: _cache[1] || (_cache[1] = function ($event) {\n      return _ctx.$router.push('/calendar');\n    }),\n    label: \"行事曆\",\n    icon: \"pi pi-calendar\",\n    \"class\": \"p-button-text\"\n  }), $setup.isLoggedIn ? (_openBlock(), _createBlock(_component_Button, {\n    key: 0,\n    onClick: _cache[2] || (_cache[2] = function ($event) {\n      return _ctx.$router.push('/admin');\n    }),\n    label: \"後臺管理\",\n    icon: \"pi pi-cog\",\n    \"class\": \"p-button-text\"\n  })) : _createCommentVNode(\"v-if\", true)]), $setup.isLoggedIn ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createElementVNode(\"span\", _hoisted_8, _toDisplayString($setup.currentUser.fullName) + \" (\" + _toDisplayString($setup.securityLevelText) + \")\", 1 /* TEXT */), _createVNode(_component_Button, {\n    onClick: $setup.logout,\n    label: \"登出\",\n    icon: \"pi pi-sign-out\",\n    \"class\": \"p-button-text\"\n  }, null, 8 /* PROPS */, [\"onClick\"])])) : _createCommentVNode(\"v-if\", true)])])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"main\", _hoisted_9, [_createVNode(_component_router_view)]), $setup.isLoggedIn ? (_openBlock(), _createElementBlock(\"footer\", _hoisted_10, _cache[4] || (_cache[4] = [_createElementVNode(\"div\", {\n    \"class\": \"footer-content\"\n  }, [_createElementVNode(\"p\", null, \"© 2025 企業行事曆系統\")], -1 /* HOISTED */)]))) : _createCommentVNode(\"v-if\", true)])]);\n}","map":{"version":3,"names":["id","key","_createElementBlock","_hoisted_1","_createVNode","_component_Toast","position","_component_ConfirmDialog","_createElementVNode","_hoisted_2","$setup","isLoggedIn","_hoisted_3","_hoisted_4","_hoisted_5","_component_router_link","to","_withCtx","_cache","_createTextVNode","_","_hoisted_6","_component_Button","onClick","$event","_ctx","$router","push","label","icon","_createBlock","_createCommentVNode","_hoisted_7","_hoisted_8","_toDisplayString","currentUser","fullName","securityLevelText","logout","_hoisted_9","_component_router_view","_hoisted_10"],"sources":["/Users/lidiannan/Documents/GitHub/calendar2/frontend/src/App.vue"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <Toast position=\"top-right\" />\n    <ConfirmDialog></ConfirmDialog>\n    <div class=\"layout-container\">\n      <header v-if=\"isLoggedIn\">\n        <div class=\"header-content\">\n          <div class=\"header-logo\">\n            <router-link to=\"/\">企業行事曆系統</router-link>\n          </div>\n          <div class=\"header-menu\">\n            <Button @click=\"$router.push('/')\" label=\"首頁\" icon=\"pi pi-home\" class=\"p-button-text\" />\n            <Button @click=\"$router.push('/calendar')\" label=\"行事曆\" icon=\"pi pi-calendar\" class=\"p-button-text\" />\n            <Button v-if=\"isLoggedIn\" @click=\"$router.push('/admin')\" label=\"後臺管理\" icon=\"pi pi-cog\" class=\"p-button-text\" />\n          </div>\n          <div class=\"header-user\" v-if=\"isLoggedIn\">\n            <span class=\"user-info\">{{ currentUser.fullName }} ({{ securityLevelText }})</span>\n            <Button @click=\"logout\" label=\"登出\" icon=\"pi pi-sign-out\" class=\"p-button-text\" />\n          </div>\n        </div>\n      </header>\n      <main class=\"main-content\">\n        <router-view />\n      </main>\n      <footer v-if=\"isLoggedIn\">\n        <div class=\"footer-content\">\n          <p>&copy; 2025 企業行事曆系統</p>\n        </div>\n      </footer>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed, onMounted } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\n\nexport default {\n  name: 'App',\n  setup() {\n    const store = useStore()\n    const router = useRouter()\n\n    // 計算屬性\n    const isLoggedIn = computed(() => store.getters['auth/isAuthenticated'])\n    const currentUser = computed(() => store.getters['auth/currentUser'])\n    const securityLevelText = computed(() => {\n      if (!currentUser.value || !currentUser.value.securityLevel) return ''\n      \n      const level = currentUser.value.securityLevel\n      switch(level) {\n        case 'LEVEL_1': return '最高權限'\n        case 'LEVEL_2': return '高級權限'\n        case 'LEVEL_3': return '中級權限'\n        case 'LEVEL_4': return '基本權限'\n        default: return level\n      }\n    })\n\n    // 方法\n    const logout = async () => {\n      try {\n        await store.dispatch('auth/logout')\n        router.push('/login')\n      } catch (error) {\n        console.error('登出失敗:', error)\n      }\n    }\n\n    // 生命週期鉤子\n    onMounted(async () => {\n      // 如果本地存儲中有token，嘗試自動登入\n      const token = localStorage.getItem('token')\n      if (token) {\n        try {\n          await store.dispatch('auth/checkAuth')\n        } catch (error) {\n          console.error('Token驗證失敗:', error)\n          localStorage.removeItem('token')\n        }\n      }\n    })\n\n    return {\n      isLoggedIn,\n      currentUser,\n      securityLevelText,\n      logout\n    }\n  }\n}\n</script>\n\n<style>\nhtml, body {\n  margin: 0;\n  padding: 0;\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif;\n  height: 100%;\n}\n\n#app {\n  height: 100%;\n}\n\n.layout-container {\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n}\n\nheader {\n  background-color: #ffffff;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n  padding: 0.5rem 2rem;\n}\n\n.header-content {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.header-logo a {\n  color: #3B82F6;\n  font-size: 1.5rem;\n  font-weight: 700;\n  text-decoration: none;\n}\n\n.header-menu {\n  display: flex;\n  gap: 1rem;\n}\n\n.header-user {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.user-info {\n  font-weight: 600;\n}\n\n.main-content {\n  flex: 1;\n  padding: 2rem;\n  background-color: #f8f9fa;\n}\n\nfooter {\n  background-color: #ffffff;\n  padding: 1rem 2rem;\n  border-top: 1px solid #e9ecef;\n}\n\n.footer-content {\n  text-align: center;\n  color: #6c757d;\n}\n</style>"],"mappings":";;;EACOA,EAAE,EAAC;AAAK;;EAGN,SAAM;AAAkB;;EAJjCC,GAAA;AAAA;;EAMa,SAAM;AAAgB;;EACpB,SAAM;AAAa;;EAGnB,SAAM;AAAa;;EAVlCA,GAAA;EAee,SAAM;;;EACH,SAAM;AAAW;;EAKvB,SAAM;AAAc;;EArBhCA,GAAA;AAAA;;;;;;;uBACEC,mBAAA,CA6BM,OA7BNC,UA6BM,GA5BJC,YAAA,CAA8BC,gBAAA;IAAvBC,QAAQ,EAAC;EAAW,IAC3BF,YAAA,CAA+BG,wBAAA,GAC/BC,mBAAA,CAyBM,OAzBNC,UAyBM,GAxBUC,MAAA,CAAAC,UAAU,I,cAAxBT,mBAAA,CAeS,UApBfU,UAAA,GAMQJ,mBAAA,CAaM,OAbNK,UAaM,GAZJL,mBAAA,CAEM,OAFNM,UAEM,GADJV,YAAA,CAAyCW,sBAAA;IAA5BC,EAAE,EAAC;EAAG;IAR/B,WAAAC,QAAA,CAQgC;MAAA,OAAOC,MAAA,QAAAA,MAAA,OARvCC,gBAAA,CAQgC,SAAO,E;;IARvCC,CAAA;QAUUZ,mBAAA,CAIM,OAJNa,UAIM,GAHJjB,YAAA,CAAwFkB,iBAAA;IAA/EC,OAAK,EAAAL,MAAA,QAAAA,MAAA,gBAAAM,MAAA;MAAA,OAAEC,IAAA,CAAAC,OAAO,CAACC,IAAI;IAAA;IAAOC,KAAK,EAAC,IAAI;IAACC,IAAI,EAAC,YAAY;IAAC,SAAM;MACtEzB,YAAA,CAAqGkB,iBAAA;IAA5FC,OAAK,EAAAL,MAAA,QAAAA,MAAA,gBAAAM,MAAA;MAAA,OAAEC,IAAA,CAAAC,OAAO,CAACC,IAAI;IAAA;IAAeC,KAAK,EAAC,KAAK;IAACC,IAAI,EAAC,gBAAgB;IAAC,SAAM;MACrEnB,MAAA,CAAAC,UAAU,I,cAAxBmB,YAAA,CAAgHR,iBAAA;IAb5HrB,GAAA;IAauCsB,OAAK,EAAAL,MAAA,QAAAA,MAAA,gBAAAM,MAAA;MAAA,OAAEC,IAAA,CAAAC,OAAO,CAACC,IAAI;IAAA;IAAYC,KAAK,EAAC,MAAM;IAACC,IAAI,EAAC,WAAW;IAAC,SAAM;QAb1GE,mBAAA,e,GAeyCrB,MAAA,CAAAC,UAAU,I,cAAzCT,mBAAA,CAGM,OAHN8B,UAGM,GAFJxB,mBAAA,CAAmF,QAAnFyB,UAAmF,EAAAC,gBAAA,CAAxDxB,MAAA,CAAAyB,WAAW,CAACC,QAAQ,IAAG,IAAE,GAAAF,gBAAA,CAAGxB,MAAA,CAAA2B,iBAAiB,IAAG,GAAC,iBAC5EjC,YAAA,CAAiFkB,iBAAA;IAAxEC,OAAK,EAAEb,MAAA,CAAA4B,MAAM;IAAEV,KAAK,EAAC,IAAI;IAACC,IAAI,EAAC,gBAAgB;IAAC,SAAM;4CAjB3EE,mBAAA,e,OAAAA,mBAAA,gBAqBMvB,mBAAA,CAEO,QAFP+B,UAEO,GADLnC,YAAA,CAAeoC,sBAAA,E,GAEH9B,MAAA,CAAAC,UAAU,I,cAAxBT,mBAAA,CAIS,UA5BfuC,WAAA,EAAAvB,MAAA,QAAAA,MAAA,OAyBQV,mBAAA,CAEM;IAFD,SAAM;EAAgB,IACzBA,mBAAA,CAA0B,WAAvB,gBAAmB,E,0BA1BhCuB,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}