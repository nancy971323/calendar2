{"ast":null,"code":"import _regeneratorRuntime from \"/Users/lidiannan/Documents/GitHub/calendar2/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/lidiannan/Documents/GitHub/calendar2/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"/Users/lidiannan/Documents/GitHub/calendar2/frontend/node_modules/core-js/modules/es.array.iterator.js\";\nimport \"/Users/lidiannan/Documents/GitHub/calendar2/frontend/node_modules/core-js/modules/es.promise.js\";\nimport \"/Users/lidiannan/Documents/GitHub/calendar2/frontend/node_modules/core-js/modules/es.object.assign.js\";\nimport \"/Users/lidiannan/Documents/GitHub/calendar2/frontend/node_modules/core-js/modules/es.promise.finally.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { createApp } from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport store from './store';\n\n// PrimeVue 相關導入\nimport PrimeVue from 'primevue/config';\nimport Button from 'primevue/button';\nimport InputText from 'primevue/inputtext';\nimport Password from 'primevue/password';\nimport Calendar from 'primevue/calendar';\nimport Dropdown from 'primevue/dropdown';\nimport Dialog from 'primevue/dialog';\nimport DataTable from 'primevue/datatable';\nimport Column from 'primevue/column';\nimport Textarea from 'primevue/textarea';\nimport Divider from 'primevue/divider';\nimport Card from 'primevue/card';\nimport Panel from 'primevue/panel';\nimport TabView from 'primevue/tabview';\nimport TabPanel from 'primevue/tabpanel';\nimport Menu from 'primevue/menu';\nimport Message from 'primevue/message';\nimport Toast from 'primevue/toast';\nimport ToastService from 'primevue/toastservice';\nimport ConfirmDialog from 'primevue/confirmdialog';\nimport ConfirmationService from 'primevue/confirmationservice';\nimport MultiSelect from 'primevue/multiselect';\n\n// PrimeVue 樣式\nimport 'primevue/resources/themes/saga-blue/theme.css';\nimport 'primevue/resources/primevue.min.css';\nimport 'primeicons/primeicons.css';\nimport 'primeflex/primeflex.css';\nvar app = createApp(App);\n\n// 註冊 PrimeVue 元件\napp.use(PrimeVue);\napp.use(ToastService);\napp.use(ConfirmationService);\napp.component('Button', Button);\napp.component('InputText', InputText);\napp.component('Password', Password);\napp.component('Calendar', Calendar);\napp.component('Dropdown', Dropdown);\napp.component('Dialog', Dialog);\napp.component('DataTable', DataTable);\napp.component('Column', Column);\napp.component('Textarea', Textarea);\napp.component('Divider', Divider);\napp.component('Card', Card);\napp.component('Panel', Panel);\napp.component('TabView', TabView);\napp.component('TabPanel', TabPanel);\napp.component('Menu', Menu);\napp.component('Message', Message);\napp.component('Toast', Toast);\napp.component('ConfirmDialog', ConfirmDialog);\napp.component('MultiSelect', MultiSelect);\n\n// 全局導航守衛\nrouter.beforeEach(/*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(to, from, next) {\n    var token;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          if (!to.matched.some(function (record) {\n            return record.meta.requiresAuth;\n          })) {\n            _context.next = 21;\n            break;\n          }\n          if (store.getters['auth/isAuthenticated']) {\n            _context.next = 18;\n            break;\n          }\n          // 嘗試從localStorage恢復身份驗證狀態\n          token = localStorage.getItem('token');\n          if (!token) {\n            _context.next = 15;\n            break;\n          }\n          _context.prev = 4;\n          _context.next = 7;\n          return store.dispatch('auth/checkAuth');\n        case 7:\n          next(); // 已驗證，繼續導航\n          return _context.abrupt(\"return\");\n        case 11:\n          _context.prev = 11;\n          _context.t0 = _context[\"catch\"](4);\n          console.error('Token驗證失敗:', _context.t0);\n          // 驗證失敗，清除token並跳轉到登入頁\n          localStorage.removeItem('token');\n        case 15:\n          // 未登入或token驗證失敗，跳轉到登入頁\n          next({\n            path: '/login',\n            query: {\n              redirect: to.fullPath\n            } // 保存原目標路徑\n          });\n          _context.next = 19;\n          break;\n        case 18:\n          next(); // 已登入，繼續導航\n        case 19:\n          _context.next = 22;\n          break;\n        case 21:\n          next(); // 不需要認證的路由，繼續導航\n        case 22:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[4, 11]]);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\napp.use(store);\napp.use(router);\napp.mount('#app');","map":{"version":3,"names":["createApp","App","router","store","PrimeVue","Button","InputText","Password","Calendar","Dropdown","Dialog","DataTable","Column","Textarea","Divider","Card","Panel","TabView","TabPanel","Menu","Message","Toast","ToastService","ConfirmDialog","ConfirmationService","MultiSelect","app","use","component","beforeEach","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","to","from","next","token","wrap","_callee$","_context","prev","matched","some","record","meta","requiresAuth","getters","localStorage","getItem","dispatch","abrupt","t0","console","error","removeItem","path","query","redirect","fullPath","stop","_x","_x2","_x3","apply","arguments","mount"],"sources":["/Users/lidiannan/Documents/GitHub/calendar2/frontend/src/main.js"],"sourcesContent":["import { createApp } from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport store from './store'\n\n// PrimeVue 相關導入\nimport PrimeVue from 'primevue/config'\nimport Button from 'primevue/button'\nimport InputText from 'primevue/inputtext'\nimport Password from 'primevue/password'\nimport Calendar from 'primevue/calendar'\nimport Dropdown from 'primevue/dropdown'\nimport Dialog from 'primevue/dialog'\nimport DataTable from 'primevue/datatable'\nimport Column from 'primevue/column'\nimport Textarea from 'primevue/textarea'\nimport Divider from 'primevue/divider'\nimport Card from 'primevue/card'\nimport Panel from 'primevue/panel'\nimport TabView from 'primevue/tabview'\nimport TabPanel from 'primevue/tabpanel'\nimport Menu from 'primevue/menu'\nimport Message from 'primevue/message'\nimport Toast from 'primevue/toast'\nimport ToastService from 'primevue/toastservice'\nimport ConfirmDialog from 'primevue/confirmdialog'\nimport ConfirmationService from 'primevue/confirmationservice'\nimport MultiSelect from 'primevue/multiselect'\n\n// PrimeVue 樣式\nimport 'primevue/resources/themes/saga-blue/theme.css'\nimport 'primevue/resources/primevue.min.css'\nimport 'primeicons/primeicons.css'\nimport 'primeflex/primeflex.css'\n\nconst app = createApp(App)\n\n// 註冊 PrimeVue 元件\napp.use(PrimeVue)\napp.use(ToastService)\napp.use(ConfirmationService)\n\napp.component('Button', Button)\napp.component('InputText', InputText)\napp.component('Password', Password)\napp.component('Calendar', Calendar)\napp.component('Dropdown', Dropdown)\napp.component('Dialog', Dialog)\napp.component('DataTable', DataTable)\napp.component('Column', Column)\napp.component('Textarea', Textarea)\napp.component('Divider', Divider)\napp.component('Card', Card)\napp.component('Panel', Panel)\napp.component('TabView', TabView)\napp.component('TabPanel', TabPanel)\napp.component('Menu', Menu)\napp.component('Message', Message)\napp.component('Toast', Toast)\napp.component('ConfirmDialog', ConfirmDialog)\napp.component('MultiSelect', MultiSelect)\n\n// 全局導航守衛\nrouter.beforeEach(async (to, from, next) => {\n  // 檢查路由是否需要認證\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    // 檢查是否已登入\n    if (!store.getters['auth/isAuthenticated']) {\n      // 嘗試從localStorage恢復身份驗證狀態\n      const token = localStorage.getItem('token')\n      if (token) {\n        try {\n          await store.dispatch('auth/checkAuth')\n          next() // 已驗證，繼續導航\n          return\n        } catch (error) {\n          console.error('Token驗證失敗:', error)\n          // 驗證失敗，清除token並跳轉到登入頁\n          localStorage.removeItem('token')\n        }\n      }\n      // 未登入或token驗證失敗，跳轉到登入頁\n      next({\n        path: '/login',\n        query: { redirect: to.fullPath } // 保存原目標路徑\n      })\n    } else {\n      next() // 已登入，繼續導航\n    }\n  } else {\n    next() // 不需要認證的路由，繼續導航\n  }\n})\n\napp.use(store)\napp.use(router)\n\napp.mount('#app')"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}