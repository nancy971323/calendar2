{"ast":null,"code":"import _regeneratorRuntime from \"/Users/lidiannan/Documents/GitHub/calendar2/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/lidiannan/Documents/GitHub/calendar2/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ref, computed, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport EmployeeManagement from './EmployeeManagement.vue';\nimport EventManagement from './EventManagement.vue';\nexport default {\n  name: 'DashboardComponent',\n  components: {\n    EmployeeManagement: EmployeeManagement,\n    EventManagement: EventManagement\n  },\n  setup: function setup() {\n    var store = useStore();\n\n    // 統計數據\n    var stats = ref({\n      employeeCount: 0,\n      eventCount: 0,\n      securityLevel: ''\n    });\n\n    // 計算屬性\n    var currentUser = computed(function () {\n      return store.getters['auth/currentUser'];\n    });\n    var employees = computed(function () {\n      return store.getters['employee/employees'];\n    });\n    var events = computed(function () {\n      return store.getters['calendar/events'];\n    });\n\n    // 格式化安全等級\n    var formatSecurityLevel = function formatSecurityLevel(level) {\n      if (!level) return '';\n      switch (level) {\n        case 'LEVEL_1':\n          return '最高權限 (等級1)';\n        case 'LEVEL_2':\n          return '高級權限 (等級2)';\n        case 'LEVEL_3':\n          return '中級權限 (等級3)';\n        case 'LEVEL_4':\n          return '基本權限 (等級4)';\n        default:\n          return level;\n      }\n    };\n\n    // 初始化\n    onMounted(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var _currentUser$value;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return store.dispatch('employee/fetchActiveEmployees');\n          case 3:\n            _context.next = 8;\n            break;\n          case 5:\n            _context.prev = 5;\n            _context.t0 = _context[\"catch\"](0);\n            console.error('無法加載員工列表:', _context.t0);\n          case 8:\n            _context.prev = 8;\n            _context.next = 11;\n            return store.dispatch('calendar/fetchMonthEvents');\n          case 11:\n            _context.next = 16;\n            break;\n          case 13:\n            _context.prev = 13;\n            _context.t1 = _context[\"catch\"](8);\n            console.error('無法加載事件列表:', _context.t1);\n          case 16:\n            // 更新統計數據\n            stats.value = {\n              employeeCount: employees.value.length,\n              eventCount: events.value.length,\n              securityLevel: formatSecurityLevel((_currentUser$value = currentUser.value) === null || _currentUser$value === void 0 ? void 0 : _currentUser$value.securityLevel)\n            };\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[0, 5], [8, 13]]);\n    })));\n    return {\n      stats: stats\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","useStore","EmployeeManagement","EventManagement","name","components","setup","store","stats","employeeCount","eventCount","securityLevel","currentUser","getters","employees","events","formatSecurityLevel","level","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_currentUser$value","wrap","_callee$","_context","prev","next","dispatch","t0","console","error","t1","value","length","stop"],"sources":["/Users/lidiannan/Documents/GitHub/calendar2/frontend/src/components/Dashboard.vue"],"sourcesContent":["<template>\n  <div class=\"dashboard-container\">\n    <div class=\"dashboard-header\">\n      <h1>後台管理</h1>\n    </div>\n    \n    <div class=\"dashboard-content\">\n      <TabView>\n        <TabPanel header=\"概覽\">\n          <div class=\"overview-content\">\n            <div class=\"dashboard-cards\">\n              <Card class=\"stats-card\">\n                <template #title>\n                  <h2><i class=\"pi pi-users\"></i> 員工統計</h2>\n                </template>\n                <template #content>\n                  <div class=\"stats-value\">{{ stats.employeeCount }}</div>\n                  <div class=\"stats-label\">活躍員工</div>\n                </template>\n              </Card>\n              \n              <Card class=\"stats-card\">\n                <template #title>\n                  <h2><i class=\"pi pi-calendar\"></i> 事件統計</h2>\n                </template>\n                <template #content>\n                  <div class=\"stats-value\">{{ stats.eventCount }}</div>\n                  <div class=\"stats-label\">本月事件</div>\n                </template>\n              </Card>\n              \n              <Card class=\"stats-card\">\n                <template #title>\n                  <h2><i class=\"pi pi-shield\"></i> 安全等級</h2>\n                </template>\n                <template #content>\n                  <div class=\"stats-value\">{{ stats.securityLevel }}</div>\n                  <div class=\"stats-label\">您的權限等級</div>\n                </template>\n              </Card>\n            </div>\n            \n            <div class=\"dashboard-intro\">\n              <h2>後台管理說明</h2>\n              <p>\n                歡迎使用企業行事曆系統後台管理。在此您可以管理員工帳號和行事曆事件，根據您的權限等級，\n                您可以執行不同的操作。使用上方的標籤可以切換不同的管理功能。\n              </p>\n              <ul>\n                <li><strong>員工管理：</strong> 創建、編輯和刪除員工帳號，設置員工權限等級。</li>\n                <li><strong>行事曆管理：</strong> 管理所有的行事曆事件，包括創建、編輯和刪除事件。</li>\n              </ul>\n            </div>\n          </div>\n        </TabPanel>\n        \n        <TabPanel header=\"員工管理\">\n          <EmployeeManagement />\n        </TabPanel>\n        \n        <TabPanel header=\"行事曆管理\">\n          <EventManagement />\n        </TabPanel>\n      </TabView>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted } from 'vue'\nimport { useStore } from 'vuex'\nimport EmployeeManagement from './EmployeeManagement.vue'\nimport EventManagement from './EventManagement.vue'\n\nexport default {\n  name: 'DashboardComponent',\n  \n  components: {\n    EmployeeManagement,\n    EventManagement\n  },\n  \n  setup() {\n    const store = useStore()\n    \n    // 統計數據\n    const stats = ref({\n      employeeCount: 0,\n      eventCount: 0,\n      securityLevel: ''\n    })\n    \n    // 計算屬性\n    const currentUser = computed(() => store.getters['auth/currentUser'])\n    const employees = computed(() => store.getters['employee/employees'])\n    const events = computed(() => store.getters['calendar/events'])\n    \n    // 格式化安全等級\n    const formatSecurityLevel = (level) => {\n      if (!level) return ''\n      \n      switch(level) {\n        case 'LEVEL_1': return '最高權限 (等級1)'\n        case 'LEVEL_2': return '高級權限 (等級2)'\n        case 'LEVEL_3': return '中級權限 (等級3)'\n        case 'LEVEL_4': return '基本權限 (等級4)'\n        default: return level\n      }\n    }\n    \n    // 初始化\n    onMounted(async () => {\n      // 加載員工列表\n      try {\n        await store.dispatch('employee/fetchActiveEmployees')\n      } catch (error) {\n        console.error('無法加載員工列表:', error)\n      }\n      \n      // 加載本月事件\n      try {\n        await store.dispatch('calendar/fetchMonthEvents')\n      } catch (error) {\n        console.error('無法加載事件列表:', error)\n      }\n      \n      // 更新統計數據\n      stats.value = {\n        employeeCount: employees.value.length,\n        eventCount: events.value.length,\n        securityLevel: formatSecurityLevel(currentUser.value?.securityLevel)\n      }\n    })\n    \n    return {\n      stats\n    }\n  }\n}\n</script>\n\n<style scoped>\n.dashboard-container {\n  background-color: #ffffff;\n  border-radius: 8px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);\n  padding: 1.5rem;\n}\n\n.dashboard-header {\n  margin-bottom: 1.5rem;\n}\n\n.dashboard-header h1 {\n  margin: 0;\n  color: #3B82F6;\n  font-size: 1.8rem;\n}\n\n.overview-content {\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n}\n\n.dashboard-cards {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 1.5rem;\n}\n\n.stats-card {\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);\n}\n\n.stats-card h2 {\n  margin: 0;\n  font-size: 1.2rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.stats-card h2 i {\n  color: #3B82F6;\n}\n\n.stats-value {\n  font-size: 2.5rem;\n  font-weight: 700;\n  color: #3B82F6;\n  text-align: center;\n  margin: 1rem 0;\n}\n\n.stats-label {\n  text-align: center;\n  color: #6c757d;\n  font-size: 1rem;\n}\n\n.dashboard-intro {\n  background-color: #f8f9fa;\n  padding: 1.5rem;\n  border-radius: 8px;\n  border-left: 4px solid #3B82F6;\n}\n\n.dashboard-intro h2 {\n  margin-top: 0;\n  color: #3B82F6;\n  font-size: 1.4rem;\n}\n\n.dashboard-intro p {\n  line-height: 1.6;\n  color: #495057;\n}\n\n.dashboard-intro ul {\n  margin-top: 1rem;\n  padding-left: 1.5rem;\n}\n\n.dashboard-intro li {\n  margin-bottom: 0.5rem;\n  color: #495057;\n}\n\n@media (max-width: 768px) {\n  .dashboard-cards {\n    grid-template-columns: 1fr;\n  }\n}\n</style>"],"mappings":";;AAqEA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAQ,QAAS,KAAI;AAC7C,SAASC,QAAO,QAAS,MAAK;AAC9B,OAAOC,kBAAiB,MAAO,0BAAyB;AACxD,OAAOC,eAAc,MAAO,uBAAsB;AAElD,eAAe;EACbC,IAAI,EAAE,oBAAoB;EAE1BC,UAAU,EAAE;IACVH,kBAAkB,EAAlBA,kBAAkB;IAClBC,eAAc,EAAdA;EACF,CAAC;EAEDG,KAAK,WAALA,KAAKA,CAAA,EAAG;IACN,IAAMC,KAAI,GAAIN,QAAQ,CAAC;;IAEvB;IACA,IAAMO,KAAI,GAAIV,GAAG,CAAC;MAChBW,aAAa,EAAE,CAAC;MAChBC,UAAU,EAAE,CAAC;MACbC,aAAa,EAAE;IACjB,CAAC;;IAED;IACA,IAAMC,WAAU,GAAIb,QAAQ,CAAC;MAAA,OAAMQ,KAAK,CAACM,OAAO,CAAC,kBAAkB,CAAC;IAAA;IACpE,IAAMC,SAAQ,GAAIf,QAAQ,CAAC;MAAA,OAAMQ,KAAK,CAACM,OAAO,CAAC,oBAAoB,CAAC;IAAA;IACpE,IAAME,MAAK,GAAIhB,QAAQ,CAAC;MAAA,OAAMQ,KAAK,CAACM,OAAO,CAAC,iBAAiB,CAAC;IAAA;;IAE9D;IACA,IAAMG,mBAAkB,GAAI,SAAtBA,mBAAkBA,CAAKC,KAAK,EAAK;MACrC,IAAI,CAACA,KAAK,EAAE,OAAO,EAAC;MAEpB,QAAOA,KAAK;QACV,KAAK,SAAS;UAAE,OAAO,YAAW;QAClC,KAAK,SAAS;UAAE,OAAO,YAAW;QAClC,KAAK,SAAS;UAAE,OAAO,YAAW;QAClC,KAAK,SAAS;UAAE,OAAO,YAAW;QAClC;UAAS,OAAOA,KAAI;MACtB;IACF;;IAEA;IACAjB,SAAS,cAAAkB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAC,SAAAC,QAAA;MAAA,IAAAC,kBAAA;MAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAAAF,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAAE,IAAA;YAAA,OAGApB,KAAK,CAACqB,QAAQ,CAAC,+BAA+B;UAAA;YAAAH,QAAA,CAAAE,IAAA;YAAA;UAAA;YAAAF,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAAI,EAAA,GAAAJ,QAAA;YAEpDK,OAAO,CAACC,KAAK,CAAC,WAAW,EAAAN,QAAA,CAAAI,EAAO;UAAA;YAAAJ,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAAE,IAAA;YAAA,OAK1BpB,KAAK,CAACqB,QAAQ,CAAC,2BAA2B;UAAA;YAAAH,QAAA,CAAAE,IAAA;YAAA;UAAA;YAAAF,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAAO,EAAA,GAAAP,QAAA;YAEhDK,OAAO,CAACC,KAAK,CAAC,WAAW,EAAAN,QAAA,CAAAO,EAAO;UAAA;YAGlC;YACAxB,KAAK,CAACyB,KAAI,GAAI;cACZxB,aAAa,EAAEK,SAAS,CAACmB,KAAK,CAACC,MAAM;cACrCxB,UAAU,EAAEK,MAAM,CAACkB,KAAK,CAACC,MAAM;cAC/BvB,aAAa,EAAEK,mBAAmB,EAAAM,kBAAA,GAACV,WAAW,CAACqB,KAAK,cAAAX,kBAAA,uBAAjBA,kBAAA,CAAmBX,aAAa;YACrE;UAAA;UAAA;YAAA,OAAAc,QAAA,CAAAU,IAAA;QAAA;MAAA,GAAAd,OAAA;IAAA,CACD;IAED,OAAO;MACLb,KAAI,EAAJA;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}